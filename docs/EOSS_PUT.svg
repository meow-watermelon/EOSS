<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="719px" preserveAspectRatio="none" style="width:783px;height:719px;" version="1.1" viewBox="0 0 783 719" width="783px" zoomAndPan="magnify"><defs><filter height="300%" id="f1ml25lh06d267" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="182" x="298" y="28.708">EOSS PUT Sequence</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="24" x2="24" y1="123.25" y2="635.375"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="249" x2="249" y1="123.25" y2="635.375"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="643" x2="643" y1="123.25" y2="635.375"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="737" x2="737" y1="123.25" y2="635.375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="5" y="119.9482">User</text><ellipse cx="24" cy="49.9531" fill="#FEFECE" filter="url(#f1ml25lh06d267)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M24,57.9531 L24,84.9531 M11,65.9531 L37,65.9531 M24,84.9531 L11,99.9531 M24,84.9531 L37,99.9531 " fill="none" filter="url(#f1ml25lh06d267)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="5" y="647.3701">User</text><ellipse cx="24" cy="660.6719" fill="#FEFECE" filter="url(#f1ml25lh06d267)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M24,668.6719 L24,695.6719 M11,676.6719 L37,676.6719 M24,695.6719 L11,710.6719 M24,695.6719 L37,710.6719 " fill="none" filter="url(#f1ml25lh06d267)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#f1ml25lh06d267)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="146" x="174" y="87.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="132" x="181" y="107.9482">EOSS Service Layer</text><rect fill="#FEFECE" filter="url(#f1ml25lh06d267)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="146" x="174" y="634.375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="132" x="181" y="654.3701">EOSS Service Layer</text><rect fill="#FEFECE" filter="url(#f1ml25lh06d267)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="92" x="595" y="87.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="602" y="107.9482">ZooKeeper</text><rect fill="#FEFECE" filter="url(#f1ml25lh06d267)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="92" x="595" y="634.375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="602" y="654.3701">ZooKeeper</text><rect fill="#FEFECE" filter="url(#f1ml25lh06d267)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="68" x="701" y="87.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="708" y="107.9482">Storage</text><rect fill="#FEFECE" filter="url(#f1ml25lh06d267)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="68" x="701" y="634.375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="708" y="654.3701">Storage</text><polygon fill="#A80036" points="237,150.3828,247,154.3828,237,158.3828,241,154.3828" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="24" x2="243" y1="154.3828" y2="154.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="31" y="149.3169">initiate object uploading</text><line style="stroke:#A80036;stroke-width:1.0;" x1="249" x2="291" y1="183.5156" y2="183.5156"/><line style="stroke:#A80036;stroke-width:1.0;" x1="291" x2="291" y1="183.5156" y2="196.5156"/><line style="stroke:#A80036;stroke-width:1.0;" x1="250" x2="291" y1="196.5156" y2="196.5156"/><polygon fill="#A80036" points="260,192.5156,250,196.5156,260,200.5156,256,196.5156" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168" x="256" y="178.4497">generate object metadata</text><polygon fill="#A80036" points="631,221.6484,641,225.6484,631,229.6484,635,225.6484" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="249" x2="637" y1="225.6484" y2="225.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="370" x="256" y="220.5825">set metadata with EOF flag 1 (INITIAL METADATA UPDATE)</text><polygon fill="#A80036" points="260,250.7813,250,254.7813,260,258.7813,256,254.7813" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="254" x2="642" y1="254.7813" y2="254.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="266" y="249.7153">response</text><polygon fill="#A80036" points="725,279.9141,735,283.9141,725,287.9141,729,283.9141" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="249" x2="731" y1="283.9141" y2="283.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160" x="256" y="278.8481">commit 1 write operation</text><polygon fill="#A80036" points="260,309.0469,250,313.0469,260,317.0469,256,313.0469" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="254" x2="736" y1="313.0469" y2="313.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="266" y="307.981">response</text><polygon fill="#A80036" points="631,338.1797,641,342.1797,631,346.1797,635,342.1797" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="249" x2="637" y1="342.1797" y2="342.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="366" x="256" y="337.1138">update metadata with EOF flag 2 (UPDATE IN PROGRESS)</text><polygon fill="#A80036" points="260,367.3125,250,371.3125,260,375.3125,256,371.3125" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="254" x2="642" y1="371.3125" y2="371.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="266" y="366.2466">response</text><polygon fill="#A80036" points="725,396.4453,735,400.4453,725,404.4453,729,400.4453" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="249" x2="731" y1="400.4453" y2="400.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="256" y="395.3794">commit rest of data</text><polygon fill="#A80036" points="260,425.5781,250,429.5781,260,433.5781,256,429.5781" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="254" x2="736" y1="429.5781" y2="429.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="266" y="424.5122">response</text><polygon fill="#A80036" points="631,454.7109,641,458.7109,631,462.7109,635,458.7109" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="249" x2="637" y1="458.7109" y2="458.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="305" x="256" y="453.645">update metadata with EOF flag 0 (EOF CLOSED)</text><polygon fill="#A80036" points="260,483.8438,250,487.8438,260,491.8438,256,487.8438" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="254" x2="642" y1="487.8438" y2="487.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="266" y="482.7778">response</text><line style="stroke:#A80036;stroke-width:1.0;" x1="249" x2="291" y1="516.9766" y2="516.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="291" x2="291" y1="516.9766" y2="529.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="250" x2="291" y1="529.9766" y2="529.9766"/><polygon fill="#A80036" points="260,525.9766,250,529.9766,260,533.9766,256,529.9766" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="256" y="511.9106">close file descriptors</text><polygon fill="#A80036" points="631,555.1094,641,559.1094,631,563.1094,635,559.1094" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="249" x2="637" y1="559.1094" y2="559.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182" x="256" y="554.0435">close ZooKeeper connection</text><polygon fill="#A80036" points="260,584.2422,250,588.2422,260,592.2422,256,588.2422" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="254" x2="642" y1="588.2422" y2="588.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="266" y="583.1763">response</text><polygon fill="#A80036" points="35,613.375,25,617.375,35,621.375,31,617.375" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="29" x2="248" y1="617.375" y2="617.375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="201" x="41" y="612.3091">return HTTP 201 response code</text><!--MD5=[4fc7f4063f55d0669d7f25e3751ad8c9]
@startuml
title EOSS PUT Sequence

actor User
User -> "EOSS Service Layer": initiate object uploading
"EOSS Service Layer" -> "EOSS Service Layer": generate object metadata
"EOSS Service Layer" -> "ZooKeeper": set metadata with EOF flag 1 (INITIAL METADATA UPDATE)
"ZooKeeper" - -> "EOSS Service Layer": response
"EOSS Service Layer" -> "Storage": commit 1 write operation
"Storage" - -> "EOSS Service Layer": response
"EOSS Service Layer" -> "ZooKeeper": update metadata with EOF flag 2 (UPDATE IN PROGRESS)
"ZooKeeper" - -> "EOSS Service Layer": response
"EOSS Service Layer" -> "Storage": commit rest of data
"Storage" - -> "EOSS Service Layer": response
"EOSS Service Layer" -> "ZooKeeper": update metadata with EOF flag 0 (EOF CLOSED)
"ZooKeeper" - -> "EOSS Service Layer": response
"EOSS Service Layer" -> "EOSS Service Layer": close file descriptors
"EOSS Service Layer" -> "ZooKeeper": close ZooKeeper connection
"ZooKeeper" - -> "EOSS Service Layer": response
"EOSS Service Layer" - -> User: return HTTP 201 response code
@enduml

PlantUML version 1.2021.00(Sun Jan 10 02:25:05 PST 2021)
(LGPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>